import{_ as F,o as O,c as l,a as e,m as P,n as b,t as a,w as c,v as p,d as _,F as v,r as m,b as h,e as B,g as f,u as M,h as $,l as y,i as u}from"./index-DXEwJY08.js";const j={class:"content-wrapper"},T={class:"header-row"},L={key:0,class:"loading-state"},W={key:1,class:"detail-container"},z={class:"info-card"},H={class:"card-header"},K={class:"header-title-row"},G={class:"info-grid basic-grid"},J={class:"info-item"},Q={class:"valueHighlight"},X={class:"info-item"},Y={class:"value"},Z={class:"info-item"},ee={class:"value"},te={class:"info-item"},oe={class:"value reason-text"},se={class:"info-card"},de={class:"filter-row"},ne=["disabled"],ae=["disabled"],le=["disabled"],ue=["disabled"],ie={class:"filter-row"},re=["disabled"],ce=["value"],ve=["disabled"],pe=["value"],Ce=["disabled"],me=["disabled"],be={key:0,class:"locked-msg"},_e={class:"inspection-table"},he=["onUpdate:modelValue","onChange","disabled"],fe=["value"],ye=["onUpdate:modelValue","disabled"],Se=["value","disabled"],ke={key:0,class:"decision-section"},xe={class:"action-buttons"},ge={class:"info-card tertiary-card"},Ne={class:"info-grid"},Ee={class:"info-item"},Re={class:"value"},Ie={class:"info-item"},Ve={class:"value"},Ae={class:"price-text"},qe={__name:"ReturnRequestDetailView",setup(we){const I=M(),V=$(),n=f(null),S=f(!0),C=f([]),s=f({boxCode:"",productIdCode:"",productCode:"",productName:"",inspectionStatus:"",productCondition:"",orderCode:"",returnCode:""}),k=["검수 전","검수 완료"],x=["검수 전","정상","하자"],A=[{returnCode:"RESE0120231101001",franchiseCode:"SE01",requestDate:"2023-11-05",status:"대기",boxCode:"SE01FA0120231105OR0101001",productIdCode:"SE01FA01AOR0101B001",orderCode:"SE0120231101001",productCode:"OR0101",productName:"오리지널 떡볶이 밀키트 순한맛 1,2인분",reason:"파손",quantity:5,amount:5e4,recipientName:"김가맹",recipientPhone:"010-1234-5678",address:"서울시 강남구 테헤란로 123",memo:"배송 대기 중인 항목입니다.",products:[{code:"OR0101",name:"오리지널 떡볶이 밀키트 순한맛 1,2인분",quantity:5,unitPrice:1e4,condition:"정상"}]},{returnCode:"RESE0220231102005",franchiseCode:"SE02",requestDate:"2023-11-06",status:"배송중",boxCode:"SE02FA0120231106RO0201010",productIdCode:"SE02FA02ARO0201B010",orderCode:"SE0220231102005",productCode:"RO0201",productName:"로제 떡볶이 밀키트 기본맛 1,2인분",reason:"오발주",quantity:10,amount:2e5,recipientName:"이점주",recipientPhone:"010-9876-5432",address:"부산시 해운대구 ...",memo:"현재 배송 중입니다."},{returnCode:"RESE0320231030020",franchiseCode:"SE03",requestDate:"2023-11-04",status:"배송 완료",boxCode:"SE03FA0120231104MA0303020",productIdCode:"SE03FA01AMA0303B020",orderCode:"SE0320231030020",productCode:"MA0303",productName:"마라 떡볶이 밀키트 매운맛 3,4인분",reason:"상품 하자",quantity:2,amount:6e4,recipientName:"박센터",recipientPhone:"010-5555-4444",address:"대전시 유성구 ...",memo:"배송 완료되어 검수 가능한 항목입니다."}];O(()=>{S.value=!0,setTimeout(()=>{const d=A.find(t=>t.returnCode===I.params.id);d&&(n.value={...d},C.value=Array.from({length:d.quantity}).map((t,o)=>({id:Date.now()+o,boxCode:d.boxCode,productIdCode:`${d.productIdCode}-${o+1}`,productCode:d.productCode,productName:d.productName,inspectionStatus:"검수 전",productCondition:"검수 전",orderCode:d.orderCode,returnCode:d.returnCode}))),S.value=!1},300)});const i=y(()=>n.value?.status==="배송 완료"),q=y(()=>C.value.filter(d=>(!s.value.boxCode||d.boxCode.includes(s.value.boxCode))&&(!s.value.productIdCode||d.productIdCode.includes(s.value.productIdCode))&&(!s.value.productCode||d.productCode.includes(s.value.productCode))&&(!s.value.productName||d.productName.includes(s.value.productName))&&(!s.value.inspectionStatus||d.inspectionStatus===s.value.inspectionStatus)&&(!s.value.productCondition||d.productCondition===s.value.productCondition)&&(!s.value.orderCode||d.orderCode.includes(s.value.orderCode))&&(!s.value.returnCode||d.returnCode.includes(s.value.returnCode)))),w=y(()=>C.value.length>0&&C.value.every(d=>d.inspectionStatus==="검수 완료")),g=y(()=>C.value.some(d=>d.productCondition==="하자")),U=d=>{d.inspectionStatus==="검수 전"?d.productCondition="검수 전":d.productCondition==="검수 전"&&(d.productCondition="정상")},N=d=>new Intl.NumberFormat("ko-KR").format(d),D=d=>({대기:"status-warning",접수:"status-info",배송중:"status-primary","배송 완료":"status-ok","검수 중":"status-primary","대금 차감 완료":"status-ok","대금 차감 거절":"status-danger"})[d]||"status-default",E=()=>{n.value.reason==="오발주"?alert("경고를 부여하며 대금 차감 승인 처리를 진행합니다."):alert("대금 차감 승인 처리를 진행합니다."),n.value.status="대금 차감 완료"},R=()=>{n.value.reason==="오발주"?alert("경고를 부여하며 대금 차감 거절 처리를 진행합니다."):alert("대금 차감 거절 처리를 진행합니다."),n.value.status="대금 차감 거절"};return(d,t)=>(u(),l("div",j,[e("div",T,[t[9]||(t[9]=e("div",{class:"title-area"},[e("h2",null,"반품 요청 상세 및 검수"),e("p",{class:"header-desc"},"반품 요청된 상품들을 검수합니다.")],-1)),e("button",{class:"secondary-btn",onClick:t[0]||(t[0]=o=>P(V).back())},"목록으로 돌아가기")]),S.value?(u(),l("div",L," 데이터를 불러오는 중입니다... ")):n.value?(u(),l("div",W,[e("div",z,[e("div",H,[e("div",K,[t[10]||(t[10]=e("h3",null,"기본 정보",-1)),e("span",{class:b(["status-badge",D(n.value.status)])},a(n.value.status),3)])]),e("div",G,[e("div",J,[t[11]||(t[11]=e("span",{class:"label"},"반품 코드",-1)),e("span",Q,a(n.value.returnCode),1)]),e("div",X,[t[12]||(t[12]=e("span",{class:"label"},"가맹점 코드",-1)),e("span",Y,a(n.value.franchiseCode),1)]),e("div",Z,[t[13]||(t[13]=e("span",{class:"label"},"요청 일자",-1)),e("span",ee,a(n.value.requestDate),1)]),e("div",te,[t[14]||(t[14]=e("span",{class:"label"},"반품 사유",-1)),e("span",oe,a(n.value.reason),1)])])]),e("div",se,[t[18]||(t[18]=e("div",{class:"card-header"},[e("h3",null,"반품 상품 검수")],-1)),e("div",{class:b(["table-filters",{"disabled-overlay":!i.value}])},[e("div",de,[c(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>s.value.boxCode=o),placeholder:"박스 코드",disabled:!i.value},null,8,ne),[[p,s.value.boxCode]]),c(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>s.value.productIdCode=o),placeholder:"제품 식별코드",disabled:!i.value},null,8,ae),[[p,s.value.productIdCode]]),c(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>s.value.productCode=o),placeholder:"제품 코드",disabled:!i.value},null,8,le),[[p,s.value.productCode]]),c(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=o=>s.value.productName=o),placeholder:"제품명",disabled:!i.value},null,8,ue),[[p,s.value.productName]])]),e("div",ie,[c(e("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.value.inspectionStatus=o),disabled:!i.value},[t[15]||(t[15]=e("option",{value:""},"검수 상태 (전체)",-1)),(u(),l(v,null,m(k,o=>e("option",{key:o,value:o},a(o),9,ce)),64))],8,re),[[_,s.value.inspectionStatus]]),c(e("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.value.productCondition=o),disabled:!i.value},[t[16]||(t[16]=e("option",{value:""},"제품 상태 (전체)",-1)),(u(),l(v,null,m(x,o=>e("option",{key:o,value:o},a(o),9,pe)),64))],8,ve),[[_,s.value.productCondition]]),c(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=o=>s.value.orderCode=o),placeholder:"발주 코드",disabled:!i.value},null,8,Ce),[[p,s.value.orderCode]]),c(e("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=o=>s.value.returnCode=o),placeholder:"반품 코드",disabled:!i.value},null,8,me),[[p,s.value.returnCode]])]),i.value?h("",!0):(u(),l("p",be," 상태가 '배송 완료'인 경우에만 검수가 가능합니다. (현재 상태: "+a(n.value.status)+") ",1))],2),e("div",{class:b(["table-container",{"disabled-table":!i.value}])},[e("table",_e,[t[17]||(t[17]=e("thead",null,[e("tr",null,[e("th",null,"박스 코드"),e("th",null,"제품 식별코드"),e("th",null,"제품 코드"),e("th",null,"제품명"),e("th",null,"검수 상태"),e("th",null,"제품 상태"),e("th",null,"발주 코드"),e("th",null,"반품 코드")])],-1)),e("tbody",null,[(u(!0),l(v,null,m(q.value,o=>(u(),l("tr",{key:o.id},[e("td",null,a(o.boxCode),1),e("td",null,[e("small",null,a(o.productIdCode),1)]),e("td",null,a(o.productCode),1),e("td",null,a(o.productName),1),e("td",null,[c(e("select",{"onUpdate:modelValue":r=>o.inspectionStatus=r,onChange:r=>U(o),class:"inline-select",disabled:!i.value},[(u(),l(v,null,m(k,r=>e("option",{key:r,value:r},a(r),9,fe)),64))],40,he),[[_,o.inspectionStatus]])]),e("td",null,[c(e("select",{"onUpdate:modelValue":r=>o.productCondition=r,disabled:!i.value||o.inspectionStatus!=="검수 완료",class:b(["inline-select",{"condition-defective":o.productCondition==="하자"}])},[(u(),l(v,null,m(x,r=>e("option",{key:r,value:r,disabled:r==="검수 전"&&o.inspectionStatus==="검수 완료"},a(r),9,Se)),64))],10,ye),[[_,o.productCondition]])]),e("td",null,a(o.orderCode),1),e("td",null,a(o.returnCode),1)]))),128))])])],2)]),i.value&&w.value?(u(),l("div",ke,[t[19]||(t[19]=e("div",{class:"decision-guide"},[e("p",{class:"guide-text"},"※ 모든 제품의 검수가 완료되었습니다. 정산 처리를 진행해 주세요.")],-1)),e("div",xe,[n.value.reason==="상품 하자"?(u(),l(v,{key:0},[g.value?(u(),l("button",{key:0,class:"deduction-btn approve",onClick:E},"대금 차감 완료")):(u(),l("button",{key:1,class:"deduction-btn reject",onClick:R},"대금 차감 거절"))],64)):n.value.reason==="오발주"?(u(),l(v,{key:1},[g.value?(u(),l("button",{key:1,class:"deduction-btn reject",onClick:R},"대금 차감 거절 (경고 부여)")):(u(),l("button",{key:0,class:"deduction-btn approve",onClick:E},"대금 차감 완료 (경고 부여)"))],64)):h("",!0)])])):h("",!0),e("div",ge,[e("div",Ne,[e("div",Ee,[t[20]||(t[20]=e("span",{class:"label"},"수령인 / 연락처",-1)),e("span",Re,a(n.value.recipientName)+" ("+a(n.value.recipientPhone)+")",1)]),e("div",Ie,[t[21]||(t[21]=e("span",{class:"label"},"반품 수량 / 금액",-1)),e("span",Ve,[B(a(N(n.value.quantity))+"개 / ",1),e("span",Ae,a(N(n.value.amount))+"원",1)])])])])])):h("",!0)]))}},De=F(qe,[["__scopeId","data-v-286dad80"]]);export{De as default};
